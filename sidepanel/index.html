<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADO to PA Copypaster</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!--
    Script loading order matters for Alpine.js store registration:

      1. app.js (synchronous, no defer) â€” registers the 'alpine:init' listener
         that creates the store and wires the TAB_CHANGED message handler.
         MUST execute before Alpine starts so the listener is already in place
         when Alpine fires 'alpine:init' during its own startup.

      2. alpine.min.js (defer) â€” waits for the DOM to be fully parsed, then
         starts Alpine.  Alpine fires 'alpine:init', our listener runs, the
         store is registered, and Alpine proceeds to walk the DOM.

    Both scripts are local files (no CDN) to comply with Chrome MV3's default
    Content Security Policy, which blocks external script sources.
  -->
  <script src="app.js"></script>
  <script defer src="../lib/alpine.min.js"></script>

  <!-- â”€â”€ Root application wrapper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <!-- All Alpine directives live inside #app. -->
  <div id="app">

    <!-- â”€â”€ Tab Bar (SPEC.md Â§7.1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <!--
      role="tablist" + role="tab" + aria-selected follows ARIA tabs pattern.
      Active tab is tracked in $store.app.activeTab ("user" | "admin").
      The .tab-btn--active class drives the visual underline indicator in CSS.
    -->
    <nav class="tab-bar" role="tablist" aria-label="Main navigation">
      <button
        role="tab"
        class="tab-btn"
        :class="{ 'tab-btn--active': $store.app.activeTab === 'user' }"
        :aria-selected="String($store.app.activeTab === 'user')"
        @click="$store.app.activeTab = 'user'"
      >User</button>
      <button
        role="tab"
        class="tab-btn"
        :class="{ 'tab-btn--active': $store.app.activeTab === 'admin' }"
        :aria-selected="String($store.app.activeTab === 'admin')"
        @click="$store.app.activeTab = 'admin'"
      >Admin</button>
    </nav>

    <!-- â”€â”€ User Tab Panel (SPEC.md Â§7.2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <!--
      x-show toggles CSS display instead of removing the element from the DOM.
      This preserves the field-results list when the user briefly switches to
      Admin and returns â€” no re-fetch needed. (design D-5)
    -->
    <div id="tab-user" role="tabpanel" aria-label="User" x-show="$store.app.activeTab === 'user'">

      <!-- Page Context Banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <!--
        Three mutually exclusive rows, each shown based on pageType.
        Each row carries both an icon and descriptive text â€” never icon-only â€”
        so the state is accessible to screen readers (SPEC.md Â§11 Phase 11 note).
        The coloured dot is aria-hidden because the surrounding text already
        conveys the meaning.
      -->
      <div class="context-banner" role="status" aria-live="polite" aria-atomic="true">

        <div class="context-banner__row context-banner__row--ado"
             x-show="$store.app.pageType === 'ado'">
          <span class="context-dot" aria-hidden="true">ðŸ”µ</span>
          <span>Azure DevOps Initiative detected. Ready to copy.</span>
        </div>

        <div class="context-banner__row context-banner__row--pa"
             x-show="$store.app.pageType === 'pa'">
          <span class="context-dot" aria-hidden="true">ðŸŸ¢</span>
          <span>PowerApps form detected. Ready to paste.</span>
        </div>

        <div class="context-banner__row context-banner__row--unsupported"
             x-show="$store.app.pageType === 'unsupported'">
          <span class="context-dot" aria-hidden="true">âšª</span>
          <span>This page is not supported. Navigate to an ADO Initiative or a PowerApps form.</span>
        </div>

      </div><!-- /context-banner -->

      <!-- Copy / Paste Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <!-- Phase 7 (Copy) and Phase 10 (Paste) will populate this section. -->
      <div class="action-buttons">
        <!-- TODO Phase 7:  Copy Initiative button + spinner + Overwrite badge -->
        <!-- TODO Phase 10: Paste to PowerApps button + spinner               -->
      </div>

      <!-- Field Status List â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <!-- Phase 7 / 10 will render one row per FieldResult after operations. -->
      <div class="field-results">
        <!-- TODO Phase 7:  render fieldResults after Copy  -->
        <!-- TODO Phase 10: render fieldResults after Paste -->
      </div>

    </div><!-- /tab-user -->

    <!-- â”€â”€ Admin Tab Panel (SPEC.md Â§7.3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <!--
      Placeholder content â€” the Admin tab will be fully built in:
        Phase 4:  Storage foundation (settings load/save)
        Phase 5:  Mapping CRUD (add / edit / delete)
        Phase 6:  Export / Import
        Phase 8:  Element picker integration
        Phase 9:  Test Selector integration
    -->
    <div id="tab-admin" role="tabpanel" aria-label="Admin" x-show="$store.app.activeTab === 'admin'">
      <p class="placeholder-msg">âš™ Admin settings â€” coming in Phase 5.</p>
    </div><!-- /tab-admin -->

  </div><!-- /app -->

</body>
</html>
